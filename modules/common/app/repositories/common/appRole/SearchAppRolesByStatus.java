package repositories.common.appRole;

import models.common.AppRole;
import models.common.AppStatus;
import play.Logger;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;

/**
 * Created by adrian on 17.07.16.
 */
public class SearchAppRolesByStatus implements I_AppRolesByStatusSearchable {

    @Override
    public HashMap<String, AppRole> searchAppRolesByStatus(AppStatus appStatus) {

        Logger.info("Search app roles by status " +appStatus.appStatusName+ "... " + new Date());

        HashMap<String, AppRole> appRolesHashMap = new HashMap<String, AppRole>();

        if(appStatus == null){

            Logger.info("App roles not found. " + new Date());
            appRolesHashMap = null;
            return  appRolesHashMap;

        }

        AppRole appRole = new AppRole();

        List<AppRole> appRolesList = new ArrayList<>();
        try {

            appRolesList = appRole.find.where().eq("appStatus", appStatus).findList();

        }catch (NullPointerException e){

            Logger.info("App roles not found. " + new Date());
            appRolesHashMap = null;
            return appRolesHashMap;

        }

        int appRolesListSize = appRolesList.size();
        if(appRolesListSize == 0){

            Logger.info("App roles not found. " + new Date());
            return null;

        }

        for(int currentPosition = 0; currentPosition < appRolesListSize; currentPosition++){

            appRolesHashMap.put(
                    appRolesList.get(currentPosition).appRoleName,
                    appRolesList.get(currentPosition)
            );

        }

        if(appRolesHashMap.size() != appRolesListSize){

            Logger.info("App roles not found. " + new Date());

        }

        Logger.info("Found " +appRolesHashMap.size()+ " app roles. " + new Date());

        return appRolesHashMap;

    }

}
