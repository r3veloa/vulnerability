package repositories.common.appStatus;

import models.common.AppStatus;
import play.Logger;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;

/**
 * Created by adrian on 17.07.16.
 */
public class SearchAllAppStatuses implements I_AllAppStatusesSearchable {

    @Override
    public HashMap<String, AppStatus> searchAll() {

        Logger.info("Search all application statuses ... "  + new Date());

        AppStatus appStatus = new AppStatus();
        List<AppStatus> appStatusesList = new ArrayList<>();
        try {

            appStatusesList = appStatus.find.all();

        }catch (NullPointerException e){

            Logger.info("Nothing found. " + new Date());
            return null;

        }

        int appStatusesListSize = appStatusesList.size();
        if(appStatusesListSize == 0){

            Logger.info("Nothing found. "  + new Date());
            return null;

        }

        HashMap<String, AppStatus> appStatusesHashMap = new HashMap<String, AppStatus>();

        for(int currentIndex = 0; currentIndex < appStatusesListSize; currentIndex++){

            appStatusesHashMap.put(
                    appStatusesList.get(currentIndex).appStatusName,
                    appStatusesList.get(currentIndex)
            );

        }

        if(appStatusesHashMap.size() != appStatusesListSize){

            Logger.info("Invalid app statuses size. " + new Date());
            return null;

        }

        Logger.info("Found " + appStatusesHashMap.size() + " app statuses.");
        return appStatusesHashMap;

    }

}
